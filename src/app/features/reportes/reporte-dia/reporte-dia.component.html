<p-toast></p-toast>
<div class="grid">
    <div class="col-12">
        <div class="card p-fluid">
            <div class="grid">
                <div class="col-12 md:col-6 lg:col-6">
                    <h3>{{ nombreModulo }}</h3>
                </div>
            </div>
            <div class="field grid justify-content-start">
                <div class="col-12 md:col-12 flex justify-content-start gap-2">
                    <div class="field">
                        <label for="startDate">Fecha Inicio</label>
                        <p-calendar id="startDate" [(ngModel)]="today" [showIcon]="true" dateFormat="yy-mm-dd"
                            placeholder="Selecciona la fecha de inicio">
                        </p-calendar>
                    </div>
                    <div class="field">
                        <label for="endDate">Fecha Fin</label>
                        <p-calendar id="endDate" [(ngModel)]="todayF" dateFormat="yy-mm-dd"
                            placeholder="Selecciona la fecha de fin">
                        </p-calendar>
                    </div>

                    <div class="field">
                        <label for="endDate"></label><br>
                        <p-button label="Filtrar" icon="pi pi-filter" (click)="consultar()" styleClass="p-button-info">
                        </p-button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="col-12 md:col-12" *ngIf="data && data.base_inicial">
        <div class="card">
            <h5><b>Detalle de Caja </b></h5>
            <br>
            <label for="fechaCierre">Fecha de Cierre</label>
            <p-calendar id="fechaCierre" [(ngModel)]="today" [showIcon]="true" dateFormat="yy-mm-dd" placeholder="Fecha de Cierre"></p-calendar>
            <div class="grid">
                <div class="col-6">
                    <p-table [value]="[
                        {concepto: 'Base Inicial', valor: data.base_inicial},
                        {concepto: 'Total Ventas', valor: data.totalventas},
                        {concepto: 'Total Gastos', valor: data.totalgastos},
                        {concepto: 'Total Neto', valor: data.totalneto}
                    ]">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>Concepto</th>
                                <th>Valor</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-item>
                            <tr>
                                <td>{{item.concepto}}</td>
                                <td>{{item.valor | currency}}</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
                <div class="col-6">
                    <p-table [value]="data.pagos">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>Concepto</th>
                                <th>Valor</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-item>
                            <tr>
                                <td>{{item.nombre}}</td>
                                <td>{{item.total | currency}}</td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="footer">
                            <tr>
                                <td><strong>Total Caja</strong></td>
                                <td><strong>{{data.totalventas | currency}}</strong></td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
                <div class="col-12">
                    <div class="flex justify-content-end">
                        <p-button label="Cerrar Caja" icon="pi pi-lock" styleClass="p-button-danger" (click)="confirm1(data)"></p-button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<p-confirmDialog [style]="{width: '90%', maxWidth: '50vw'}"></p-confirmDialog>
